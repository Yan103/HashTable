# **HashTable**

<img align="right" width="300" height="190" src="img/ht.jpg">

<div style="margin-right: 330px;">

**–•–µ—à-—Ç–∞–±–ª–∏—Ü–∞** ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, —Ä–µ–∞–ª–∏–∑—É—é—â–∞—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞, –∞ –∏–º–µ–Ω–Ω–æ, –æ–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä—ã (*–∫–ª—é—á, –∑–Ω–∞—á–µ–Ω–∏–µ*) –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ç—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏: –æ–ø–µ—Ä–∞—Ü–∏—é –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –ø–∞—Ä—ã, –æ–ø–µ—Ä–∞—Ü–∏—é —É–¥–∞–ª–µ–Ω–∏—è –∏ –æ–ø–µ—Ä–∞—Ü–∏—é –ø–æ–∏—Å–∫–∞ –ø–∞—Ä—ã –ø–æ –∫–ª—é—á—É.

# **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã**

–ú–æ—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–µ—Ç–æ–¥–∞ —Ü–µ–ø–æ—á–µ–∫ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è *–¥–≤—É—Å–≤—è–∑–Ω—ã–π —Å–ø–∏—Å–æ–∫*), –≤ –Ω–µ–π —Ä–µ–∞–ª–∏–∑–≤–∞–Ω—ã —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: –≤—Å—Ç–∞–≤–∫–∞, —É–¥–∞–ª–µ–Ω–∏–µ, –ø–æ–∏—Å–∫, —Ä–µ—Å–∞–π–∑. –¢–∞–±–ª–∏—Ü–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Å—Ç—Ä–æ–∫–∞–º–∏, –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å—Ç—Ä–æ–∫ –≤–∑—è—Ç–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ *–î–∂. –†. –†. –¢–æ–ª–∫–∏–Ω–∞ "–í–ª–∞—Å—Ç–µ–ª–∏–Ω –∫–æ–ª–µ—Ü"*. 

**–ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–¥–∞—á–∏:** –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ 10 –º–∏–ª–ª–∏–æ–Ω–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–∏—Å–∫–∞ (—Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –∏–∑ —Å–ª–æ–≤ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞, –∞ —Ç–∞–∫–∂–µ –∏–∑ —Å–ª–æ–≤–∞—Ä—è –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —Å–ª–æ–≤), –¥–∞–ª–µ–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∞—è –∏–∑ —Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏–π –ø—Ä–æ—è–≤–ª—è–µ—Ç —Å–µ–±—è –ª—É—á—à–µ, –∞ —Ç–∞–∫–∂–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å 3 –≤–∏–¥–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ - –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω–∞—è –≤—Å—Ç–∞–≤–∫–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç—Ä–∏–Ω—Å–∏–∫–æ–≤, –∞ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–π –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–µ.

# **–ê–Ω–∞–ª–∏–∑ —Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏–π**

–í –∫–∞—á–µ—Å—Ç–≤–µ —Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –º–æ–µ–π —Ö–µ—à —Ç–∞–±–ª–∏—Ü—ã –±—ã–ª–∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω—ã –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:

*   **–î–ª–∏–Ω–∞ —Å–ª–æ–≤–∞**
*   **–°—É–º–º–∞ ASCII –∫–æ–¥–æ–≤**
*   **–°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ASCII –∫–æ–¥–æ–≤**
*   **–ü–æ–ª–∏–Ω–æ–º–∏–∞–ª—å–Ω–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
*   **DJB2**
*   **CRC32**

–î–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏ –±—ã–ª–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω—ã –¥–∏–∞–≥—Ä–∞–º–º—ã –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–ª–ª–∏–∑–∏–π –Ω–∞ –æ–¥–∏–Ω –∫–ª—é—á, —Ç–∞–∫–∂–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª–∞—Å—å –¥–∏—Å–ø–µ—Ä—Å–∏—è, —É —Ö–æ—Ä–æ—à–µ–π —Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–∞–ª–æ –∫–æ–ª–ª–∏–∑–∏–π, –∞ —Ç–∞–∫–∂–µ –Ω–∏–∑–∫–∞—è –¥–∏—Å–ø–µ—Ä—Å–∏—è.

# –î–ª–∏–Ω–∞ —Å–ª–æ–≤–∞

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ö–µ—à–∞ - –¥–ª–∏–Ω—É —Å–ª–æ–≤–∞, —è–≤–Ω–æ –Ω–µ —Å–∞–º—ã–π –ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å–ª–æ–≤–∞ –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—É—é –¥–ª–∏–Ω—É, –∞ —Ç–∞–∫–∂–µ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–ª–æ–≤ –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—É—é –¥–ª–∏–Ω—É, —á—Ç–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —á–∏—Å–ª–æ –∫–æ–ª–ª–∏–∑–∏–π.

<img align="center" width="600" height="360" src="img/WordLength.png">

# –°—É–º–º–∞ ASCII –∫–æ–¥–æ–≤

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —É–∂–µ –ø—Ä–æ—è–≤–∏–ª–∞ —Å–µ–±—è –ª—É—á—à–µ –¥—Ä—É–≥–æ–π, –æ–¥–Ω–∞–∫–æ –≤—Å—ë —Ä–∞–≤–Ω–æ —Å—É–º–º–∞ –∫–æ–¥–æ–≤ —Å–∏–º–≤–æ–ª–æ–≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞, –∞ —Ç–∞–∫–∂–µ —Ä–∞–∑–Ω—ã–µ —Å–ª–æ–≤–∞ (–¥–∞–∂–µ —Å–ª–æ–≤–∞ —Ä–∞–∑–Ω–æ–π –¥–ª–∏–Ω—ã) –º–æ–≥—É—Ç –∏–º–µ—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—É—é —Å—É–º–º–∞ –∫–æ–¥–æ–≤ —Å–∏–º–≤–æ–ª–æ–≤, –ø–æ—ç—Ç–æ–º—É –≤—Å—ë –µ—â—ë –∏–º–µ–µ–º –±–æ–ª—å—à–æ–µ —á–∏—Å–ª–æ –∫–æ–ª–ª–∏–∑–∏–π.

<img align="center" width="600" height="360" src="img/ASCIIsum.png">

# –°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ASCII –∫–æ–¥–æ–≤

–°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–¥–æ–≤ –±—É–∫–≤ —Ç–æ–∂–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ö–æ—Ä–æ—à–µ–π —Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏–µ–π, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∏ —É—Å—Ä–µ–¥–Ω–µ–Ω–∏–∏ –º—ã –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ–ª—É—á–∞–µ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Å–ø–µ–∫—Ç—Ä –∑–Ω–∞—á–µ–Ω–∏–π, –Ω–æ –∏ –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π - –∫–æ–ª–ª–∏–∑–∏–π.

<img align="center" width="600" height="360" src="img/ASCIIaverage.png">

# –ü–æ–ª–∏–Ω–æ–º–∏–∞–ª—å–Ω–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–∞–Ω–Ω—ã–π –≤–∏–¥ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–∫–∞–∑–∞–ª —Å–µ–±—è –Ω–∞–º–Ω–æ–≥–æ –ª—É—á—à–µ –≤—Å–µ—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö, –º—ã –≤–∏–¥–∏–º, –∫–∞–∫ —É–º–µ–Ω—å—à–∏–ª–æ—Å—å —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–ª–ª–∏–∑–∏–π, –æ–¥–Ω–∞–∫–æ –≤—Å—ë –µ—â—ë –µ—Å—Ç—å –±–æ–ª—å—à–∏–µ —Å—Ç–æ–ª–±–∏–∫–∏ –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–µ, —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ —Å–æ–≤—Å–µ–º —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ.

–Ø —Ä–µ—à–∏–ª –≤—ã–±—Ä–∞—Ç—å –≤–æ—Ç —Ç–∞–∫–æ–π –≤–æ—Ç –ø–æ–ª–∏–Ω–æ–º üòá
```c
for (; *key; ++key) {
        hash = hash * 31 + (unsigned char)*key;
    }
```

<img align="center" width="600" height="360" src="img/Polynomial.png">

# DJB2

–î–∞–Ω–Ω–∞—è —Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏—è —è–≤–ª—è–µ—Ç—Å—è –¥–æ–≤–æ–ª—å–Ω–æ —Ö–æ—Ä–æ—à–µ–π (–∑–∞ —Å—á—ë—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥–æ–±–∏—Ç—å—Å—è —É–ª—É—á—à–µ–Ω–∏—è), –æ–¥–Ω–∞–∫–æ –≤–∏–¥–∏–º, —á—Ç–æ —É –Ω–∞—Å –∏–º–µ—é—Ç—Å—è –¥–æ–≤–æ–ª—å–Ω–æ –±–æ–ª—å—à–æ–π —Ä–∞–∑–±—Ä–æ—Å –∑–Ω–∞—á–µ–Ω–∏–π, –ø–æ—ç—Ç–æ–º—É –ø–æ–∫–∞ —á—Ç–æ —ç—Ç–æ –Ω–µ —Å–∞–º—ã–π –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.

<img align="center" width="600" height="360" src="img/djb2.png">

# CRC32

–ë—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Ñ—É–Ω–∫—Ü–∏–∏ crc32, –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–æ–ª—É—á–∞–µ–º –ø—Ä–∏–º–µ—Ä–Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π —Ö–µ—à–µ–π, –∞ —Ç–∞–∂–∫–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–≤—ã—Å–æ–∫–∏–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å –¥–∏—Å–ø–µ—Ä—Å–∏–∏.

<img align="center" width="600" height="360" src="img/crc32.png">

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ, –º—ã –ø–æ–ª—É—á–∞–µ–º, —á—Ç–æ –Ω–∞–∏–±–æ–ª–µ–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∏—Ö —Å—Ç—Ä–æ–∫ —è–≤–ª—è–µ—Ç—Å—è **CRC32**, —É –Ω–µ—ë —Å–∞–º—ã–µ —Ö–æ—Ä–æ—à–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø–æ —Å—Ä–µ–¥–Ω–µ–º—É —á–∏—Å–ª—É –∫–æ–ª–ª–∏–∑–∏–π, –∞ —Ç–∞–∫–∂–µ –Ω–∏–∑–∫–∞—è –¥–∏—Å–ø–µ—Ä—Å–∏—è. –í –¥–∞–ª—å–Ω–µ–π—à–µ–º –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–µ–Ω–Ω–æ –µ—ë.

# **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ö–µ—à-—Ç–∞–±–ª–∏—Ü—ã**

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –±—ã–ª–∏ –ø—Ä–æ–≤–µ–¥–µ–Ω—ã –ø–æ–ø—ã—Ç–∫–∏ —É—Å–∫–æ—Ä–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –ø—É—Ç—ë–º –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö **—Ñ–ª–∞–≥–æ–≤ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**. –î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –±–∞–∑–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç (—Å —Ñ–ª–∞–≥–æ–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π `-O0`, –∞ —Ç–∞–∫–∂–µ –≤ —Ä–µ–∂–∏–º–µ –¥–µ–±–∞–≥–∞):

<img align="center" width="600" height="175" src="img/base_res.jpg">

–ö–∞–∫ –≤–∏–¥–∏–º, –Ω–µ —Å–æ–≤—Å–µ–º —Ç–æ, —á—Ç–æ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –≤–∏–¥–µ—Ç—å, –¥–∞–≤–∞–π—Ç–µ –ø–æ–ø—Ä–æ–±—É–µ–º —É—Å–∫–æ—Ä–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É - –¥–æ–±–∞–≤–∏–º —Ñ–ª–∞–≥ `-O1`, –∞ —Ç–∞–∫–∂–µ —É–±–µ—Ä—ë–º –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ–ª–∞–≥–∏ –∏ –≤—ã–∫–ª—é—á–∏–º —Ä–µ–∂–∏–º –¥–µ–±–∞–≥–∞:

<img align="center" width="600" height="175" src="img/O1_res.jpg">

–°—Ç–∞–ª–æ –ª—É—á—à–µ, –æ–¥–Ω–∞–∫–æ –º–æ–∂–µ–º –¥–æ–±–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–æ–ª—É—á—à–µ. –î–ª—è —ç—Ç–æ–≥–æ **–æ—Å—Ç–∞–≤–∏–º —Ç–æ–ª—å–∫–æ —Ñ–ª–∞–≥ `-O2`**:

<img align="center" width="600" height="175" src="img/O2.jpg">

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑–º–µ—Ä–µ–Ω–∏–π –∑–∞–ø–∏—à–µ–º –≤ —Ç–∞–±–ª–∏—Ü—É, –±—É–¥–µ–º —Å—á–∏—Ç–∞—Ç—å —É—Å–∫–æ—Ä–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏, –∞ —Ç–∞–∫–∂–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å–∞–º–æ–π –ø–µ—Ä–≤–æ–π (–±–∞–∑–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏):

| –°—Ç–∞–¥–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã (–≤ —Ç–∞–∫—Ç–∞—Ö) | –£—Å–∫–æ—Ä–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ (–≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö) | –£—Å–∫–æ—Ä–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –±–∞–∑–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ (–≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö)|
|:------------------:|:-----------------------:|:----------------------------------------:|:-------------------------------------:|
|   –ë–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è   |       6142775058        |                    -                     |             -                         |
|   -O1              |       5013458683        |                  18.4%                   |           18.4%                       |
|   -O2              |       2437929415        |                  51.4%                   |           60.3%                       |

# **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ —Ñ–ª–∞–≥–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**

–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø —Ä–∞–±–æ—Ç—ã –∑–∞–∫–ª—é—á–∞–ª—Å—è –≤ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–æ–µ–π —Ö–µ—à-—Ç–∞–±–ª–∏—Ü—ã. –î–ª—è —ç—Ç–æ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –±—ã–ª–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã. –î–ª—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ —è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —É—Ç–∏–ª–∏—Ç—É `valgrind`, –∞ –µ—Å–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–µ–µ, —Ç–æ `callgrind` (**Callgrind** ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤ —Å–æ—Å—Ç–∞–≤–µ valgrind –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º. –û–Ω –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π, —Å–æ–±–∏—Ä–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –æ–± –∏–µ—Ä–∞—Ä—Ö–∏–∏ –≤—ã–∑–æ–≤–æ–≤).

```shell
# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
make   

# –í—ã–∑–æ–≤ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫–∞
valgrind --tool=callgrind ./build/hashtable 

# –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
kcachegrind callgrind.out
```

–í–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–º–µ—Ä–æ–≤ **–¥–ª—è —Å–∞–º–æ–π –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏** –ø—Ä–æ–≥—Ä–∞–º–º—ã:

<img align="center" width="600" height="360" src="img/crc_slow.jpg">

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è –±—ã–ª–æ –≤—ã—è–≤–ª–µ–Ω–æ, —á—Ç–æ *—Ñ—É–Ω–∫—Ü–∏—è crc32 –¥–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ —Ö–µ—à–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–ª–≥–æ*. –ü–æ—ç—Ç–æ–º—É –±—ã–ª–æ –ø—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –µ—ë.

–í–æ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—É—é –º—ã —Å–µ–π—á–∞—Å –±—É–¥–µ–º –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å:

```c
size_t GetHashCRC32Default(KeyType* key) {
    assert(key != NULL);

    size_t size = strlen(key);
    size_t crc  = 0xffffffff;

	while (size-- != 0) {
        crc = (crc << 8) ^ crc32_table[((crc >> 24) ^ (size_t)*key) & 255];
        key++;
    }

    return crc;
}
```

–ë—É–¥–µ–º –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –µ—ë —Å –ø–æ–º–æ—â—å—é **–∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏** —Ñ—É–Ω–∫—Ü–∏–∏ `crc32` –∏ –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω–æ–π –≤—Å—Ç–∞–≤–∫–∏, —Ç–∞–∫–∂–µ —Å–¥–µ–ª–∞–µ–º –µ—ë `inline`-—Ñ—É–Ω–∫—Ü–∏–µ–π:

```c
size_t GetHashCRC32Optimize(KeyType* key) {
    assert(key != NULL);

    size_t size = strlen(key);
    size_t crc  = 0xffffffff;
    
    for (size_t i = 0; i < size; i++) {
        asm volatile (
            "crc32b %1, %0"
            : "+r"(crc)
            : "rm"(*key)
        );
        key++;
    }

    return crc;
}
```

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–æ–∂–µ–º —É–≤–∏–¥–µ—Ç—å –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ –Ω–∏–∂–µ:

<img align="center" width="600" height="360" src="img/crc_opt.jpg">

–ö–∞–∫ –≤–∏–¥–∏–º, —É–¥–∞–ª–æ—Å—å —Å–Ω–∏–∑–∏—Ç—å –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–¥—Å—á—ë—Ç–∞ —Ö–µ—à–∞ (*self*), —Ç–∞–∫–∂–µ –º—ã –≤–∏–¥–∏–º, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è —Å—Ç–∞–ª–∞ –≤—ã–∑—ã–≤–∞—Ç—å –º–µ–Ω—å—à–µ –¥—Ä—É–≥–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –ø–æ–¥ —Å–æ–±–æ–π.

–¢–µ–ø–µ—Ä—å –∑–∞–ø—É—Å—Ç–∏–º —Ç–æ—Ç –∂–µ —Ç–µ—Å—Ç –¥–ª—è –Ω–∞—à–µ–π —Ö–µ—à-—Ç–∞–±–ª–∏—Ü—ã.

<img align="center" width="600" height="175" src="img/crc32opt.jpg">

–í–æ—Ç —Ç–∞–±–ª–∏—á–∫–∞ —Å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:

| –°—Ç–∞–¥–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã (–≤ —Ç–∞–∫—Ç–∞—Ö) | –£—Å–∫–æ—Ä–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ (–≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö) | –£—Å–∫–æ—Ä–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –±–∞–∑–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ (–≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö)|
|:------------------:|:-----------------------:|:----------------------------------------:|:-------------------------------------:|
|   –ë–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è   |       6142775058        |                    -                     |             -                         |
|   -O1              |       5013458683        |                  18.4%                   |           18.4%                       |
|   -O2              |       2437929415        |                  51.4%                   |           60.3%                       |
|  crc32 optimize    |       3482656359        |                 -42.9%                   |           43.3%                       |

<img align="center" width="600" height="175" src="img/find_slow.jpg">

–î–∞–ª–µ–µ –±—ã–ª–æ –ø—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –Ω–µ–º–Ω–æ–≥–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–∏—Å–∫–∞ `HashTableFind`, –∞ –∏–º–µ–Ω–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `strcmp`, –∫–æ—Ç–æ—Ä–∞—è —á–∞—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ –Ω—ë–º.

–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∏—Å–∫–∞:

```c
Node* HashTableFind(Node* head, KeyType* find_key) {
    while (head != NULL) {
        if (strcmp(head->key, find_key) == 0) return head;
        head = head->next;
    }

    return NULL;
}
```

–ß—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–∏—Å–∫–∞, –Ω–∞–ø–∏—à–µ–º —Å–≤–æ—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **SIMD-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏**. –¢–∞–∫–∂–µ –±—É–¥–µ–º —Ö—Ä–∞–Ω–∏—Ç—å –≤ –ø–µ—Ä–≤—ã—Ö —á–µ—Ç—ã—Ä—ë—Ö –±–∞–π—Ç–∞—Ö —Å—Ç—Ä–æ–∫–∏ –µ—ë –¥–ª–∏–Ω—É, —ç—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç —Å—Ä–∞–∑—É –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å –Ω–µ—Å–æ–≤–ø–∞–¥–∞—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏. 

```c
int MyAsmStrCmp(KeyType* str1, KeyType* str2) {
    assert(str1 != NULL);
    assert(str2 != NULL);

    uint32_t len1 = *((uint32_t*)str1);
    uint32_t len2 = *((uint32_t*)str2);

    if (len1 != len2) return 1;

    const char* s1 = str1 + LENGTH_FIELD_SIZE;
    const char* s2 = str2 + LENGTH_FIELD_SIZE;

    size_t i = 0;
    for (; i + LEN_ALIGNMENT <= len1; i += LEN_ALIGNMENT) {
        __m128i xmm1 = _mm_loadu_si128((__m128i*)(s1 + i));
        __m128i xmm2 = _mm_loadu_si128((__m128i*)(s2 + i));
        __m128i cmp  = _mm_cmpeq_epi8(xmm1, xmm2);

        if (_mm_movemask_epi8(cmp) != 0xFFFF) 
            return 1; 
    }

    //* remained
    for (; i < len1; ++i) {
        if (s1[i] != s2[i])
            return 1;
    }

    return 0;
}
```

–¢–µ–ø–µ—Ä—å —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –ø—Ä–∏–º–µ—Ç –≤–∏–¥:

```c
Node* HashTableFind(Node* head, KeyType* find_key) {
    while (head != NULL) {
        if (MyAsmStrCmp(head->key, find_key) == 0) return head;
        head = head->next;
    }
    return NULL;
}
```

–ö—Ä–æ–º–µ —Ç–æ–≥–æ –±—ã–ª–æ —Ä–µ—à–µ–Ω–æ –Ω–µ–º–Ω–æ–≥–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥—Å—á—ë—Ç –æ—Å—Ç–∞—Ç–∫–∞ –æ—Ç –¥–µ–ª–µ–Ω–∏—è –Ω–∞ `ht->capacity` –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ö–µ—à–∞, —Ç–∞–∫ –∫–∞–∫ –æ–ø–µ—Ä–∞—Ü–∏—è `%` —è–≤–ª—è–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–æ–π (10-30 —Ç–∞–∫—Ç–æ–≤). –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å —Ä–∞–∑–º–µ—Ä —Ö–µ—à-—Ç–∞–±–ª–∏—Ü—ã —Å—Ç–µ–ø–µ–Ω—å—é –¥–≤–æ–π–∫–∏ –∏ —Ç–æ–≥–¥–∞ –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `%` –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞—Ç—å `hash & (ht->capacity - 1)`. –û–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã—á–∏—Ç–∞–Ω–∏—è –∏ –ø–æ–±–∏—Ç–æ–≤–æ–≥–æ –ò —Å—Ç–æ—è—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –º–µ–Ω—å—à–µ (1-3 –∏ 1 —Ç–∞–∫—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ).

–ò—Ç–æ–≥–æ –ø–æ–ª—É—á–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

<img align="center" width="600" height="175" src="img/mystrcmp.jpg">

| –°—Ç–∞–¥–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã (–≤ —Ç–∞–∫—Ç–∞—Ö) | –£—Å–∫–æ—Ä–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ (–≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö) | –£—Å–∫–æ—Ä–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –±–∞–∑–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ (–≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö)|
|:------------------:|:-----------------------:|:----------------------------------------:|:-------------------------------------:|
|   –ë–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è   |       6142775058        |                    -                     |             -                         |
|   -O1              |       5013458683        |                  18.4%                   |           18.4%                       |
|   -O2              |       2437929415        |                  51.4%                   |           60.3%                       |
|  crc32 optimize    |       3482656359        |                 -42.9%                   |           43.3%                       |
|  MyStrCmp          |       3319376591        |                   4.7%                   |           45.9%                       |


–í —Ö–æ–¥–µ —Ä–∞–±–æ—Ç—ã –±—ã–ª–∞ –Ω–∞–ø–∏—Å–∞–Ω–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Ö–µ—à-—Ç–∞–±–ª–∏—Ü–∞ —Å –º–µ—Ç–æ–¥–æ–º —Ü–µ–ø–æ—á–µ–∫, –±—ã–ª –ø—Ä–æ–≤–µ–¥—ë–Ω –∞–Ω–∞–ª–∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏–π. –° –ø–æ–º–æ—â—å—é —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–∏–¥–æ–≤ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –∫–æ–¥ —Å—Ç–∞–ª –Ω–µ–º–Ω–æ–≥–æ –º–µ–Ω–µ–µ —á–∏—Ç–∞–µ–º—ã–º, –æ–¥–Ω–∞–∫–æ —ç—Ç–æ —Ö–æ—Ä–æ—à–æ —Å–∫–∞–∑–∞–ª–æ—Å—å –Ω–∞ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã.

# **–°–ø–∏—Å–æ–∫ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã –∏ –¥—Ä—É–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤**

* –ë—Ä–∞–π–∞–Ω—Ç –†., –û‚Äô–•–∞–ª–ª–∞—Ä–æ–Ω –î. –ö–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ. –í–∑–≥–ª—è–¥ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞. ‚Äî 3-–µ –∏–∑–¥. ‚Äî –ú.: –î–∏–∞–ª–µ–∫—Ç–∏–∫–∞, 2021. ‚Äî 1088 —Å.
* –ö–æ—Ä–º–µ–Ω –¢., –õ–µ–π–∑–µ—Ä—Å–æ–Ω –ß., –†–∏–≤–µ—Å—Ç –†., –®—Ç–∞–π–Ω –ö. –ê–ª–≥–æ—Ä–∏—Ç–º—ã: –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑. ‚Äî 3-–µ –∏–∑–¥. ‚Äî –ú.: –í–∏–ª—å—è–º—Å, 2022. ‚Äî 1328 —Å.
* –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ CRC32 –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è GCC // [GitHub](https://github.com/gcc-mirror/gcc/blob/master/libiberty/crc32.c)
* –°–ª–æ–≤–∞—Ä—å –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö —Å–ª–æ–≤ // [GitHub](https://github.com/dwyl/english-words)
* –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç—Ä–∏–Ω—Å–∏–∫–∞–º // [Intel Intrinsics Guide](https://www.laruence.com/sse/)